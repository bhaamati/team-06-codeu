<!DOCTYPE html>
<html>
  <head>
    <title>Information</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/user-page.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

  </head>
  <body id="facts_body">
    <nav class="navbar navbar-expand-md navbar-dark fixed-top navbar-collapse bg-steel" id="head-navbar">
      <div class="container">
        <a class="navbar-brand mr-4 logo" href="/"><b>Blossom</b></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Left Side of Navbar -->
        <div class="collapse navbar-collapse" id="navbarToggle">
            <div class="navbar-nav mr-auto">
              <a class="nav-item nav-link" href="/">Home</a>
              <a class="nav-item nav-link" href="/aboutus.html">About</a>
        </div>

        <!-- Right Side of Navbar -->
        <div class="nav navbar-nav pull-right">
          <a class="nav-item nav-link mr-4" href="/statistics.html">Helpful Facts</a>
          <a class="nav-item nav-link mr-4" href="/clinics-map.html">Resources</a>
          <a class="nav-item nav-link mr-4" href="/user-page.html">Forum</a>
        </div>
      </div>
    </nav>
    <br>
   <h1 id="facts_title">Helpful Facts</h1>
    <script type="text/javascript"
    src="https://www.gstatic.com/charts/loader.js"></script>
    <h2>General</h2>
    <ul>
      <li>19% of all pregnancies end in abortion</li>
      <li>1 in 3 American women will have an abortion by age 45</li>
      <li>6 in 10 women having abortions already have a child</li>
    </ul>
    <script type="text/javascript">

    // load Charts and the corechart package.
    google.charts.load('current', {'packages': ['corechart']});

    // Draw the pie chart  for racial distribution of abortions
    google.charts.setOnLoadCallback(drawRaceChart);

    // Draw the pie chart for when abortions typically occur
    google.charts.setOnLoadCallback(drawWhenChart);


    function drawRaceChart() {
      var raceData = google.visualization.arrayToDataTable([
        ['Ethnic background' , 'Percentage'],
        ['White', 39],
        ['Black', 28],
        ['Hispanic', 25],
        ['Asian/Pacific Islander', 6],
        ['Other', 3]
      ]);
      var raceOptions = {
        title: 'Diversity Of U.S Abortion Patients',
        backgroundColor: 'transparent',
        pieHole: 0.4
      };
      var raceChart = new google.visualization.PieChart(document.getElementById('raceChart'));
      raceChart.draw(raceData, raceOptions);
    }

    // Callback that draws the pie chart for when abortions typically occur
    function drawWhenChart() {
      var whenData = google.visualization.arrayToDataTable([
        ['Weeks of Gestation' , 'Percentage'],
        ['6 weeks or less', 34.2],
        ['7-9 weeks', 40],
        ['10-12 weeks', 13.8],
        ['13-15 weeks', 6.3],
        ['16-20 weeks', 4.1],
        ['21 weeks or more', 1.3]
      ]);
      var whenOptions = {
        title: 'When Do Abortions Typically Occur? (by weeks of pregnancy)',
        is3D: true,
        backgroundColor: 'transparent'

      };
      var whenChart = new google.visualization.PieChart(document.getElementById('whenChart_3D'));
      whenChart.draw(whenData, whenOptions);
    }
    </script>
    <div id="raceChart" style="width:800px; height: 500px;"></div>
    <div id="whenChart_3D" style="width: 800px; height: 500px;"></div>

    <h2>Procedures</h2>
    <ul>
      <li><strong>Medication Abortion (The Abortion Pill)</strong>
      </li>
        <ul>
          <li>
            <b>When:</b> 5-10 weeks into pregnancy
          </li>
          <li>
            <b>Pros:</b> Fast, least invasive, and easiest to obtain
          </li>
          <li>
            <b>Cons:</b> Requires multiple appointments, can be more
            expensive than a surgical procedure, risk of needing
            an additional procedure if there are complications
          </li>
        </ul>
      <li><strong>Aspiration Abortion</strong></li>
        <ul>
          <li>
            <b>When:</b> 5-12 weeks into pregnancy
          </li>
          <li>
            <b>Pros:</b> quicker and cheaper than the pill, only requires
            one appointment
         </li>
         <li>
           <b>Cons:</b> Can take longer to schedule an appointment and/or
           find a clinic that offers the procedure
         </li>
        </ul>
      <li><strong>Dilation and Evacuation</strong></li>
        <ul>
          <li>
            <b>When:</b> 9-21 weeks into pregnancy
          </li>
          <li>
            <b>Pros:</b> safest way to terminate a pregnancy after 10 weeks
          </li>
          <li>
            <b>Cons:</b> can be expensive and/or completely inaccesible in certain states
          </li>
        </ul>
      <li><strong>Dilation and Extraction</strong></li>
        <ul>
          <li>
            <b>When:</b> 16-24 weeks into pregnancy
          </li>
          <li>
            <b>Pros:</b> low risk of major complications
          </li>
          <li>
            <b>Cons:</b> Very expensive, hard to access,
            very little data on them
          </li>
        </ul>
    </ul>
    <script type="text/javascript">
    // procedures charts

    google.charts.load('current', {'packages': ['corechart']});
    // Draw the column chart for the cost of an abortion
    google.charts.setOnLoadCallback(drawCostChart);
    // Draw the column chart for the length of an abortion
    google.charts.setOnLoadCallback(drawLengthChart);

    function drawCostChart() {
      // cost of procedure
      fetch("/costChart")
      .then((response) => {
        return response.json();
      })
      .then((costJson) => {
        var costData = new google.visualization.DataTable();
        costData.addColumn('string', 'Procedure');
        costData.addColumn('number', 'Average Cost (in USD)');

        for (i = 0; i < costJson.length; i++) {
          costRow = [];
          var procedure = costJson[i].procedure;
          var cost = costJson[i].cost;
          costRow.push(procedure, cost);
          costData.addRow(costRow);
        }
        var costOptions = {
          title: 'Cost of Abortion procedures',
          width: 800, height: 500,
          backgroundColor: 'transparent',
          animation: {
            duration: 1500,
            "startup": true
          }
        };
      var costChart =
      new google.visualization.ColumnChart(document.getElementById('cost_chart'));
      costChart.draw(costData, costOptions);
      });
    }

    function drawLengthChart() {
      // length of procedure
      fetch("/lengthChart")
      .then((response) => {
        return response.json();
      })
      .then((lengthJson) => {
        var lengthData = new google.visualization.DataTable();
        lengthData.addColumn('string', 'Procedure');
        lengthData.addColumn('number', 'Average length (in minutes)');

        for (i = 0; i < lengthJson.length; i++) {
          lengthRow = [];
          var procedure = lengthJson[i].procedure;
          var length = lengthJson[i].length;
          lengthRow.push(procedure, length);
          lengthData.addRow(lengthRow);
        }
        var lengthOptions = {
          title: 'Length of Abortion procedures',
          width: 800, height: 500,
          backgroundColor: 'transparent',
          animation: {
            duration: 1500,
            "startup": true
          }
        };
      var lengthChart =
      new google.visualization.ColumnChart(document.getElementById('length_chart'));
      lengthChart.draw(lengthData, lengthOptions);
      });
    }

    </script>
    <div id="cost_chart"></div>
    <div id="length_chart"></div>
    <h2>Laws & Policies</h2>
    <script type="text/javascript">
    google.charts.load('current', {'packages'  : ['geochart'],
    'mapsApiKey': 'AIzaSyBe07-CG9ZcJEpo70rVTDKxsWU-KhFEl9k'
  });
  google.charts.setOnLoadCallback(drawLawMap);

  function drawLawMap() {
    var legalData = new google.visualization.DataTable();
    legalData.addColumn('string', 'State');
    // Use custom HTML content for the domain tooltip.
    legalData.addColumn('number', 'Legal up to: ');
    legalData.addColumn({'type': 'string', 'role': 'tooltip', 'p': {'html': true}});
    legalData.addRows([
      ['Alabama', 6, createCustomHTMLContent(6, 'https://upload.wikimedia.org/wikipedia/commons/5/5c/Flag_of_Alabama.svg',
       'All abortions are considered illegal unless it\'s determined to be necessary to prevent a serious health risk to the unborn child\'s mother.')],
      ['Alaska', 6, createCustomHTMLContent(6, 'https://upload.wikimedia.org/wikipedia/commons/e/e6/Flag_of_Alaska.svg',
       'All abortions are considered illegal unless performed before fetus heartbeat is detected.')],
      ['Arizona', 24, createCustomHTMLContent(24, 'https://upload.wikimedia.org/wikipedia/commons/9/9d/Flag_of_Arizona.svg',
      'All abortions are considered a felony unless performed to save the life of the mother.')],
      ['Arkansas', 18, createCustomHTMLContent(18, 'https://upload.wikimedia.org/wikipedia/commons/9/9d/Flag_of_Arkansas.svg',
      'Abortions are illegal after the period of quickening, which usually occurs between 16 to 20 weeks into pregnancy.')],
      ['California', 24, createCustomHTMLContent(24,'https://upload.wikimedia.org/wikipedia/commons/0/01/Flag_of_California.svg', 'none')],/*
      ['Colorado', 24, createCustomHTMLContent('', '')],
      ['Connecticut', 24, createCustomHTMLContent('', '')],
      ['Delaware', 20, createCustomHTMLContent('', '')], // *restrictions apply
      ['Florida', 24, createCustomHTMLContent('', '')],// *restrictions apply
      ['Georgia', 6, createCustomHTMLContent('', '')],
      ['Hawaii', 6, createCustomHTMLContent('', '')],
      ['Idaho', 24, createCustomHTMLContent('', '')],
      ['Illinois', 6, createCustomHTMLContent('', '')],
      ['Indiana', 14, createCustomHTMLContent('', '')],
      ['Iowa', 20, createCustomHTMLContent('', '')],
      ['Kansas', 6, createCustomHTMLContent('', '')],
      ['Kentucky', 6, createCustomHTMLContent('', '')],
      ['Louisiana', 6, createCustomHTMLContent('', '')],
      ['Maine', 6, createCustomHTMLContent('', '')],
      ['Maryland', 24, createCustomHTMLContent('', '')],
      ['Massachusetts', 24, createCustomHTMLContent('', '')],
      ['Michigan', 20, createCustomHTMLContent('', '')],
      ['Minnesota', 24, createCustomHTMLContent('', '')],
      ['Mississippi', 24, createCustomHTMLContent('', '')],
      ['Missouri', 8, createCustomHTMLContent('', '')],
      ['Montana', 6, createCustomHTMLContent('', '')],
      ['Nebraska', 24, createCustomHTMLContent('', '')],
      ['Nevada', 24, createCustomHTMLContent('', '')],
      ['New Hampshire', 24, createCustomHTMLContent('', '')],
      ['New Jersey', 24, createCustomHTMLContent('', '')],
      ['New Mexico', 24, createCustomHTMLContent('', '')],
      ['New York', 24, createCustomHTMLContent('', '')],
      ['North Carolina', 20, createCustomHTMLContent('', '')],
      ['North Dakota', 12, createCustomHTMLContent('', '')],
      ['Ohio', 6, createCustomHTMLContent('', '')],
      ['Oklahoma', 24], createCustomHTMLContent('', ''),
      ['Oregon', 40, createCustomHTMLContent('', '')],
      ['Pennsylvania', 24, createCustomHTMLContent('', '')],
      ['Rhode Island', 24, createCustomHTMLContent('', '')],
      ['South Carolina', 24, createCustomHTMLContent('', '')],
      ['South Dakota', 24, createCustomHTMLContent('', '')],
      ['Tennessee', 6, createCustomHTMLContent('', '')],
      ['Texas', 20, createCustomHTMLContent('', '')],
      ['Utah', 28, createCustomHTMLContent('', '')],
      ['Vermont', 40, createCustomHTMLContent('', '')],
      ['Virginia', 24, createCustomHTMLContent('', '')],
      ['Washington', 24, createCustomHTMLContent('', '')],
      ['West Virginia', 0, createCustomHTMLContent('', '')],
      ['Wisconsin', 21, createCustomHTMLContent('', '')],
      ['Wyoming', 6, createCustomHTMLContent('', '')]*/
    ]);

    var legalOptions = {
      focusTarget: 'category',
      tooltip: { isHtml: true },
      sizeAxis: { minValue: 0, maxValue: 24},
      region: 'US',
      displayMode: 'regions',
      colorAxis: {colors: ['red', 'pink', 'blue']},
      backgroundColor: '#81d4fa',
      datalessRegionColor: 'white',
      defaultColor: '#f8bbd0',
      resolution: 'provinces'
    };
    var legalChart = new google.visualization.GeoChart(
      document.getElementById('legal_chart'));
      legalChart.draw(legalData, legalOptions);
  }

  function createCustomHTMLContent(weeksOfLegality, flagURL, restrictions){
    return '<div style="width: 100px">' +
    '<img src="' + flagURL + '" style="width:75px;height:50px"; text-align: center><br/>' +
    '<b>Legal  up to: </b><br>' + weeksOfLegality + ' weeks<br>' +
    '<b>Restrictions: </b><br>' + restrictions;
  }
  </script>
  <div id="legal_chart" style="width: 900px; height: 500px;"></div>
  <br>
  </body>
</html>
